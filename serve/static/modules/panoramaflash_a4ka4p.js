/**/_jsload2&&_jsload2('panoramaflash', 'x.extend(Sa.prototype,{Xi:function(){for(var a=0;a<A.yr.length;a++)A.yr[a](this);this.Sf!=s&&this.dispatchEvent(new O("onvisible_poi_type_changed"),{visiblePOIType:this.Sf});this.pl=this.ph();this.Lr=this.md=t;this.Lq={};this.ld=new ol(this);this.yS();this.lQ();this.nQ();if(this.hb||this.Mb)this.hb?this.Gc(this.hb,this.Pe):this.va(this.Mb)},nQ:function(){var a=this;setInterval(function(){if(a.Zb()){var b=a.ph();b.Ub(a.pl)||(a.ld.set("size",{width:b.width,height:b.height}),a.pl=b,a.dispatchEvent(new O("size_changed")))}}, 80)},yS:function(){var a=this.ld,b=this;a.addEventListener("clicked_position",function(a){b.dispatchEvent(new O("onclicked_position"),a)});a.addEventListener("thumbnail_complete",function(){b.dispatchEvent(new O("onthumbnail_complete"))});a.addEventListener("indoor_enter",function(a){a.data.z5===s?b.Hj({haveBreakId:t}):b.Hj({haveBreakId:q});b.dispatchEvent(new O("onhaveBreakId_changed"))});a.addEventListener("first_thumb_complete",function(){var a,e;if(b.md!==q){b.md=q;a=this;b.hb=a.get("id");"street"!= b.Pe&&(b.Pe="street",b.Gy("inter"));b.eo=a.get("links");e=a.get("position");b.Mb=e;e=a.get("pov");!b.Oa.heading&&!b.Oa.pitch?b.Oa=e:(e.heading!=b.Oa.heading||e.pitch!=b.Oa.pitch)&&a.set("pov",b.Oa);e=a.get("zoom");1==!b.Rc&&1!=e?b.Rc==e:b.Rc!=e&&a.set("zoom",b.Rc);e=s;for(var f in b.Oe)e=b.Oe[f],delete b.Oe[f],b.Ra(e);b.m.navigationControl===t&&a.set("navigationControlVisible",t);var g=function(b){a.Gs("toggleUI",{topo:b.linksControl,wellLid:b.clickOnRoad,innerExit:t,innerFloor:b.indoorFloorControl})}; g(b.m);b.addEventListener("clickonroad_changed",function(){g(b.m)});b.addEventListener("links_visible_changed",function(){g(b.m)});b.addEventListener("onindoorfloor_options_changed",function(){g(b.m)});b.addEventListener("navigation_visible_changed",function(){a.set("navigationControlVisible",b.m.navigationControl)});if(0<b.fh.length){f=0;for(e=b.fh.length;f<e;f++)b.fh[f].register(b.R,b,b.ld);var i="",k=[];f=0;for(e=b.Ar.length;f<e;f++)i=b.Ar[f].TM,k=b.Ar[f].SM,b[i].apply(b,k)}b.m.visible?b.show(): b.aa()}});a.addEventListener("pano_error",function(){b.dispatchEvent(new O("error"))});a.addEventListener("id_changed",function(a){if(b.md||b.hb==s||"inter"==b.Pe)b.hb=a.data;b.dispatchEvent(new O("onid_changed"))});a.addEventListener("position_changed",function(a){b.md?b.Mb=b.ld.get("position"):b.Mb==s&&(b.Mb=a.data);b.dispatchEvent(new O("onposition_changed"))});a.addEventListener("pov_changed",function(a){if(b.md||b.Oa.heading==s)b.Oa=a.data;b.dispatchEvent(new O("onpov_changed"))});a.addEventListener("links_changed", function(a){if(b.md||0==b.eo.length)b.eo=a.data;b.dispatchEvent(new O("onlinks_changed"))});a.addEventListener("zoom_changed",function(a){if(b.md||b.Rc==s)b.Rc=a.data;b.dispatchEvent(new O("onzoom_changed"))});a.addEventListener("sdata_loaded",function(a){b.Gy(a.data.panoType);b.dispatchEvent(new O("oncopyright_changed"),{copyright:a.data.copyright});if(b.Lr){for(var e in b.Lq)b[e](b.Lq[e]);b.Lr=t;b.Lq={}}});a.addEventListener("overlay_mouseclick",function(a){a=b.Oe[a.data.markerId];a.dispatchEvent(new O("onclick"), {type:"click",target:a})});a.addEventListener("overlay_mouseover",function(a){a=b.Oe[a.data.markerId];a.dispatchEvent(new O("onmouseover"),{type:"mouseover",target:a})});a.addEventListener("overlay_mouseout",function(a){a=b.Oe[a.data.markerId];a.dispatchEvent(new O("onmouseout"),{type:"mouseout",target:a})})},lQ:function(){var a=this;x.V(this.R,ka.ga.Xe?"DOMMouseScroll":"onmousewheel",function(b){if(a.m.enableScrollWheelZoom&&a.m.visible){var c=-b.detail/3||b.wheelDelta/120,c=a.la()+c;a.Xc(c);Ib(b)}})}, Gc:function(a,b,c){"object"===typeof b&&(c=b,b=l);if(!this.md||a&&a!=this.hb)this.md||(this.hb=a,this.Pe=b||"street",this.Mb=s),this.ld.set("id",{id:a,type:b||"street"}),this.Lr=q,c&&c.pov&&this.Ad(c.pov)},va:function(a){if(!this.md||a&&!this.Mb.Ub(a))this.md||(this.Mb=a,this.hb=s),this.ld.set("position",a),this.Lr=q},Ad:function(a){a&&(90<a.pitch&&(a.pitch=90),-90>a.pitch&&(a.pitch=-90),this.md?this.Lr?this.Lq.setPov=a:this.ld.set("pov",a):this.Oa=a)},Xc:function(a){a!=this.Rc&&(a>vf&&(a=vf),a<wf&& (a=wf),this.md?this.ld.set("zoom",a):this.Rc=a,this.Lq.setZoom=a)},show:function(){this.m.visible=q;this.Gf&&(this.P&&this.P.Ta()===this.R)&&x.U.show(this.Gf);this.ld&&this.ld.xr&&(this.ld.xr.style.left="0");this.md&&(this.Cl===this.Zb()&&this.ld.set("id",{id:this.Cl,type:this.MS||"street"}),this.dispatchEvent(new O("onvisible_changed")))},aa:function(){this.m.visible=t;this.md&&(this.Cl=this.hb,this.MS=this.Pe,this.ld.Gs("closePano"));this.hb=s;this.ld&&this.ld.xr&&(this.ld.xr.style.left="-9999px"); this.dispatchEvent(new O("onvisible_changed"))},UB:function(a){function b(a,b){return function(){a.Ar.push({TM:b,SM:arguments})}}if(this.md)a.register(this.R,this,this.ld);else for(var c=a.getPanoMethodList(),e="",f=0,g=c.length;f<g;f++)e=c[f],this[e]=b(this,e);this.fh.push(a)},aF:function(a){this.md&&a.dispose();for(var b=this.fh.length;b--;)this.fh[b]===a&&this.fh.splice(b,1)},eu:function(a){this.Sf=a||"none";this.dispatchEvent(new O("onvisible_poi_type_changed"),{visiblePOIType:this.Sf})},Ra:function(a){this.Oe[a.qd]= a;this.md&&this.dispatchEvent(new O("onadd_overlay"),{overlay:a})},Jb:function(a){var b=a.qd;this.md&&this.dispatchEvent(new O("onremove_overlay"),{overlay:a});delete this.Oe[b]},gp:function(){var a=this.ld.get("indoorData");a&&a.pid&&this.Gc(a.pid)},oF:function(a){this.ld.set("interactiveState",a)}});wk=Sa.prototype; U(wk,{setId:wk.Gc,setPosition:wk.va,setPov:wk.Ad,setZoom:wk.Xc,show:wk.show,hide:wk.aa,addPlugin:wk.UB,removePlugin:wk.aF,addOverlay:wk.Ra,removeOverlay:wk.Jb,setPanoramaPOIType:wk.eu,exitInter:wk.gp,setInteractiveState:wk.oF});function pl(){this.iT=(this.qA=window.ActiveXObject&&!(window.opera&&!window.opera.nodeType))?\' classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" codebase="http://fpdownload.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,0,0"\':\' type="application/x-shockwave-flash"\';this.rI=["id","width","height","align","data"];this.sI="wmode movie flashvars scale quality play loop menu salign bgcolor base allowscriptaccess allownetworking allowfullscreen seamlesstabbing devicefont swliveconnect".split(" ")} x.extend(pl.prototype,{create:function(a,b){var c=this.HR(a);b&&"string"===typeof b&&(b=document.getElementById(b));b?b.innerHTML=c:document.write(c)},remove:function(a){if((a=this.KL(a))&&this.qA){a.style.display="none";for(var b in a)"function"===typeof a[b]&&(a[b]=s);window.nP&&setTimeout(window.nP,0)}a.parentNode.removeChild(a)},yX:function(){function a(){var c=function(){var a=navigator;if(a.plugins&&a.mimeTypes.length){if((a=a.plugins["Shockwave Flash"])&&a.description)return a.description.replace(/([a-zA-Z]|\\s)+/, "").replace(/(\\s)+r/,".")+".0"}else if(b.qA)try{var c=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");if(c)return c.GetVariable("$version").replace(/WIN/g,"").replace(/,/g,".")}catch(g){}}();a=function(){return c};return c}var b=this;return a()},KL:function(a){return document.getElementById(a)},gH:function(a,b){for(var a=a.split("."),b=b.split("."),c=Math.max(a.length,b.length),e=0;e<c;e++){var f=a[e],g=b[e];if(!f||!g)return!f&&!g?0:f?1:-1;f=Number(f);g=Number(g);if(f<g)return-1;if(f>g)return 1}return 0}, HR:function(a){a=a||{};a.movie=a.url||"";a.altHtml=a.errorMessage||"";if(a.vars){var b=a.vars,c=[],e=s,f=s;for(e in b)f=b[e],c.push(e+"="+encodeURIComponent(f));a.flashvars=c.join("&")}a.minVer=a.ver;b=a.minVer;c=a.maxVer;if(b||c)if(e=this.yX(),!e||b&&0>this.gH(e,b)||c&&0<this.gH(e,c))return a.altHtml||"";e=["<object",this.iT];a.data=a.movie;for(b=0;b<this.rI.length;b++)c=this.rI[b],a.hasOwnProperty(c)&&e.push(" ",c,\'="\',a[c],\'"\');e.push(">");for(b=0;b<this.sI.length;b++)c=this.sI[b],a.hasOwnProperty(c)&& e.push(\'<param name="\',c,\'" value="\',a[c],\'"/>\');e.push("</object>");return e.join("")}});function ql(a,b){this.W=a;this.DR=b;this.Sh={};this.wz()}x.extend(ql.prototype,{wz:function(){var a=this,b=a.W;b.addEventListener("add_overlay",function(b){b=b.overlay;b.za(a.W,a.DR);a.Sh[b.qd]=b});b.addEventListener("remove_overlay",function(b){b=b.overlay;b.remove();delete a.Sh[b.qd]})}});x.extend(Af.prototype,{za:function(a,b){this.W=a;this.ma()||this.va(this.W.ma());this.Ha=b;this.ob()},ob:function(){var a=this.ma(),a=Yc.be.Ig(a),a={markerId:this.qd,catalog:"FD01",name:this.Ek(),rank:this.jp(),x:a.x,y:a.y,color:this.Hm(),hoverColor:this.$L,backgroundHoverColor:this.ZJ,borderColor:this.borderColor,borderHoverColor:this.cK,backgroundColor:this.backgroundColor,padding:this.padding,fontSize:this.fontSize,borderWidth:this.borderWidth};if(this.eE||this.getImageData())a.imageUrl=this.eE, a.imageData=this.getImageData(),a.size=this.Cb(),a.image=this.sx(),a.catalog="FD02",this.Cb()&&(a.width=this.Cb()[0],a.height=this.Cb()[1]);this.Ha.KN(a)},hide:function(){this.Wa=t;this.Ha&&this.Ha.Ro(this.qd,"visible",t)},show:function(){this.Wa=q;this.Ha&&this.Ha.Ro(this.qd,"visible",q)},isVisible:u("Wa"),Rf:function(a,b){this.Ha&&("position"==a&&(b=Yc.be.Ig(b),b={lng:b.x,lat:b.y}),this.Ha.Ro(this.qd,a,b))},remove:function(){this.dispatchEvent(new O("onremove"),{type:"remove",target:this});this.Ha.DK([this.qd])}});var rl={none:"",transit:"FE0A",hotel:"FE02",catering:"FE01",movie:"FE06",indoor_scene:"FEFE"},sl={none:["-1",""],transit:["0","m_transit.png"],hotel:["1","m_hotel.png"],catering:["2","m_catering.png"],movie:["3","m_movie.png"],transit:["4","m_transit.png"],indoor_scene:["5","m_indoor_scene.png"]}; x.extend(Df.prototype,{za:function(a,b){this.W=a;this.Ha=b;this.ob()},ob:function(){var a=this.ma(),a=Yc.be.Ig(a),b=this.$R(),c=this.PD();this.Ha.KN({markerId:this.qd,catalog:b,name:this.rp(),rank:this.jp(),x:a.x,y:a.y,heading:c.heading,pitch:c.pitch,pid:c.panoId,panoIId:c.panoIId})},$R:function(){var a=this.lp().match(/.*\\/(.*)/)[1],b;for(b in sl)if(sl[b][1]==a)return rl[b]},hide:function(){this.Wa=t;this.Ha.Ro(this.qd,"visible",t)},show:function(){this.Wa=q;this.Ha.Ro(this.qd,"visible",q)},isVisible:u("Wa"), Rf:function(a,b){"position"==a&&(b=Yc.be.Ig(b),b={lng:b.x,lat:b.y});this.Ha.Ro(this.qd,a,b)},remove:function(){this.dispatchEvent(new O("onremove"),{type:"remove",target:this});this.Ha.DK([this.qd])}});ol.no=new Yc(s,{Ye:"api"});function ol(a){x.lang.Ja.call(this);a&&(this.W=a,this.Zg=s,this.tH=a.R.clientWidth,this.sH=a.R.clientHeight,new ql(a,this))}ol.OP=A.rh("pano");x.lang.xa(ol,x.lang.Ja,"PanoramaFlashWraper"); x.extend(ol.prototype,{KN:function(a){this.Gs("addMarkers",[a])},DK:function(a){this.Gs("removeMarkers",[a])},Ro:function(a,b,c){var e={};e.markerId=a;e[b]=c;this.set("markerProperty",e)},get:function(a){var b=s;"position"==a?(b=this.Zg.get("mercatorPosition"),b=Yc.be.Fj(new Q(b.mercatorX,b.mercatorY))):b=this.Zg.get(a);return b},set:function(a,b){var c=this;"position"==a?ol.no.uj(b,function(a){a&&a.id?c.W.Gc(a.id):c.dispatchEvent(new O("pano_error"))}):"id"==a?c.Zg==s?c.FS(c.W):c.Zg.set&&c.Zg.set("panoOptions", {id:b.id,panoType:b.type,width:c.tH,height:c.sH}):c.Zg&&c.Zg.set&&c.Zg.set(a,b)},Gs:function(a,b){return this.Zg.doAction(a,b)},Q3:u("xr"),FS:function(a){var b=this,c=a.m.swfSrc.match(/.*\\//)[0]+"BDStreetScape.swf";b.Zg=q;ol.no.Ax(function(e){var f="",g="";"inter"===a.Pe?g=a.hb:f=a.hb;f={pid:f,iid:g,panoType:a.Pe,heading:a.Oa.heading,pitch:a.Oa.pitch,width:b.tH,height:b.sH,panoUrl:c,panoTileUrl:ol.OP.join("|"),domain:Yc.Nu,jsInterfaceNamespace:"BMap.PanoramaFlashInterface",swfIndex:b.da};g=a.m.swfSrc; e&&(e.panoUdt&&e.panoUdt.version&&f)&&(f.udtVersion=e.panoUdt.version);e&&(e.panoSwfAPI&&e.panoSwfAPI.version&&f)&&(f.panoUrl=f.panoUrl+"?version="+e.panoSwfAPI.version,g=g+"?version="+e.panoSwfAPI.version);b.Zg=b.ZQ(a.R,f,g)})},ZQ:function(a,b,c){var e=new pl,f="PanoramaFlash"+this.da,g=s,g=F("div");g.style.position="absolute";g.id="PanoramaFlashWraper"+this.da;g.style.top="0";g.style.left="0";g.style.height="100%";g.style.width="100%";g.style.zIndex=1200;this.xr=g;a.appendChild(g);e.create({id:f, width:"100%",height:"100%",allowscriptaccess:"always",scale:"showall",wmode:"opaque",quality:"best",url:c,ver:"10.2",errorMessage:"\\u60a8\\u672a\\u5b89\\u88c5Flash Player\\u64ad\\u653e\\u5668\\u6216\\u8005\\u7248\\u672c\\u8fc7\\u4f4e",vars:b},g);return e.KL(f)}});var tl=ol.prototype;U(tl,{get:tl.get,set:tl.set,doAction:tl.Gs}); ');
